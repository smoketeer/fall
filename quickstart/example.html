<!DOCTYPE html>

<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  

  <title>Code Example - KOS F.A.L.L.</title>
  <link rel="stylesheet" href="https://smoketeer.github.io/fall/assets/css/just-the-docs.css">

  

  
    <script type="text/javascript" src="https://smoketeer.github.io/fall/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="https://smoketeer.github.io/fall/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <div>
      <a href="https://smoketeer.github.io/fall" class="site-title fs-6 lh-tight">KOS F.A.L.L.</a>
      </div>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://smoketeer.github.io/fall/" class="navigation-list-link">Home</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="https://smoketeer.github.io/fall/quickstart/" class="navigation-list-link">Quickstart</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://smoketeer.github.io/fall/quickstart/installation" class="navigation-list-link">Installation</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://smoketeer.github.io/fall/quickstart/howtouse" class="navigation-list-link">How to use</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item  active">
                      
                      <a href="https://smoketeer.github.io/fall/quickstart/example" class="navigation-list-link active">Code Example</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://smoketeer.github.io/fall/docs/" class="navigation-list-link">Docs</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://smoketeer.github.io/fall/docs/introduction" class="navigation-list-link">Introduction</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/introduction/objects" class="navigation-list-link">Simulating objects</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/introduction/components" class="navigation-list-link">Custom components</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://smoketeer.github.io/fall/docs/models" class="navigation-list-link">Models</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/models/hoverSlamModel" class="navigation-list-link">hoverSlamModel</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/models/landingDataModel" class="navigation-list-link">landingDataModel</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://smoketeer.github.io/fall/docs/controllers" class="navigation-list-link">Controllers</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/ascentController" class="navigation-list-link">ascentController</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/boostbackController" class="navigation-list-link">boostbackController</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/glideController" class="navigation-list-link">glideController</a>
                              </li>
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/glidePIDController" class="navigation-list-link">glidePIDController</a>
                              </li>
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/landingController" class="navigation-list-link">landingController</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/landingPIDController" class="navigation-list-link">landingPIDController</a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/controllers/passcontrol" class="navigation-list-link">Passing Control</a>
                              </li>
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://smoketeer.github.io/fall/docs/utilities" class="navigation-list-link">Utilities</a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a href="https://smoketeer.github.io/fall/docs/utilities/importfall" class="navigation-list-link">importFall</a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://smoketeer.github.io/fall/tutorials/" class="navigation-list-link">Tutorials</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        
        <p class="label label-yellow">UNDER CONSTRUCTION</p>
        
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search KOS F.A.L.L." aria-label="Search KOS F.A.L.L." autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
        </div>
      </div>
      <div class="main-content">
        
          
            <nav class="breadcrumb-nav">
              <ol class="breadcrumb-nav-list">
                
                  <li class="breadcrumb-nav-list-item"><a href="https://smoketeer.github.io/fall/quickstart/">Quickstart</a></li>
                
                <li class="breadcrumb-nav-list-item"><span>Code Example</span></li>
              </ol>
            </nav>
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 class="d-inline-block" id="code-example">Code Example</h1>

<p class="label label-green">Tutorial</p>
<p>In this section we’re going to build our very first script that uses FALL module.
It’s assumed that you’re using stock KSP aerodynamic model and know the basics of
Kerbal Operating System mod.</p>

<hr />

<h2 id="goals-and-requirements">Goals and requirements</h2>
<p>Mission sequence:</p>
<ul>
  <li>Liftoff</li>
  <li>Pitchover at velocity of 90 m/s, by 10 degrees with 3 degrees aoa</li>
  <li>Ascent until apoapsis &gt; 8000 meters and then turn off the engine</li>
  <li>Land safely</li>
</ul>

<p>Rocket should:</p>
<ul>
  <li>Have RCS thrusters, preferably at the top</li>
  <li>Be able to turn retrograde when falling</li>
</ul>

<h2 id="what-do-we-need">What do we need?</h2>

<p>Because our goal is to perform an ascent and then safely touchdown, we’re going
to use only two structures:</p>
<ul>
  <li>ascentController</li>
  <li>hoverslamModel</li>
</ul>

<h2 id="implementation">Implementation</h2>

<p>First let’s import the structures we need:</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="nv">runoncepath</span><span class="p">(</span><span class="s">&quot;0:/fall/controllers/ascentController&quot;</span><span class="p">).</span>
<span class="nv">runoncepath</span><span class="p">(</span><span class="s">&quot;0:/fall/models/hoverslamModel&quot;</span><span class="p">).</span></code></pre></figure>

<p>Now we initialize new <code>ascentController</code> object with previously defined parameters:</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="c1">// -- [ Prelaunch ] -------------</span>
<span class="k">local</span> <span class="nv">ascent</span> <span class="ow">is</span> <span class="nv">ascentController</span><span class="p">(</span><span class="mf">8000</span><span class="p">,</span> <span class="mf">90</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">3</span><span class="p">).</span></code></pre></figure>

<p>Short launch sequence(assuming the rocket is held by clamps) can be written as:</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="c1">// -- [ Launch ] ----------------</span>
<span class="k">stage</span><span class="p">.</span> <span class="c1">// turn on engines</span>
<span class="k">lock</span> <span class="nv">throttle</span> <span class="ow">to</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">stage</span><span class="p">.</span> <span class="c1">// release clamps</span></code></pre></figure>

<p>Rocket is now lifting off, but isn’t steered in any way. Let’s give full control
to our <code>ascent</code> object:</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="c1">// -- [ Ascent ] ----------------</span>
<span class="nv">ascent</span><span class="p">[</span><span class="s">&quot;passControl&quot;</span><span class="p">]().</span></code></pre></figure>

<p>At this stage the rocket will perform ascent until apoapsis(8000 meters) goal is reached. Then the engine will shutdown. Oh no!
Don’t panic. First we will turn retrograde, and wait until the rocket is falling.</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="c1">// -- [ Shutdown ] --------------</span>
<span class="nv">RCS</span> <span class="nb">ON</span><span class="p">.</span>
<span class="k">lock</span> <span class="nv">steering</span> <span class="ow">to</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">srfretrograde</span><span class="p">.</span>
<span class="k">wait</span> <span class="k">until</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">verticalspeed</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">.</span> <span class="c1">// waiting for descent</span></code></pre></figure>

<p>And now we will safely land thanks to the magic(not really) of <code>hoverlsamModel</code> object:</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="c1">// -- [ Landing ] ---------------</span>

<span class="c1">// number 10 comes from the height of the rocket in meters</span>
<span class="c1">// it&#39;s advised to overshoot it a little bit(by say 3-5 meters)</span>
<span class="k">local</span> <span class="nv">hoverslam</span> <span class="ow">is</span> <span class="nv">hoverslamModel</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span>
<span class="k">lock</span> <span class="nv">throttle</span> <span class="ow">to</span> <span class="nv">hoverslam</span><span class="p">[</span><span class="s">&quot;getThrottle&quot;</span><span class="p">]().</span>

<span class="k">wait</span> <span class="k">until</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">status</span> <span class="o">=</span> <span class="s">&quot;splashed&quot;</span> <span class="ow">or</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">status</span><span class="o">=</span><span class="s">&quot;landed&quot;</span><span class="p">.</span>
<span class="c1">// We&#39;ve landed!</span></code></pre></figure>

<p>Code in its entirety looks like this:</p>

<figure class="highlight"><pre><code class="language-kerboscript" data-lang="kerboscript"><span></span><span class="nv">runoncepath</span><span class="p">(</span><span class="s">&quot;0:/fall/controllers/ascentController&quot;</span><span class="p">).</span>
<span class="nv">runoncepath</span><span class="p">(</span><span class="s">&quot;0:/fall/models/hoverslamModel&quot;</span><span class="p">).</span>

<span class="c1">// -- [ Prelaunch ] -------------</span>
<span class="k">local</span> <span class="nv">ascent</span> <span class="ow">is</span> <span class="nv">ascentController</span><span class="p">(</span><span class="mf">8000</span><span class="p">,</span> <span class="mf">90</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">3</span><span class="p">).</span>

<span class="c1">// -- [ Launch ] ----------------</span>
<span class="k">stage</span><span class="p">.</span>
<span class="k">lock</span> <span class="nv">throttle</span> <span class="ow">to</span> <span class="mf">1</span><span class="p">.</span>
<span class="k">stage</span><span class="p">.</span>

<span class="c1">// -- [ Ascent ] ----------------</span>
<span class="nv">ascent</span><span class="p">[</span><span class="s">&quot;passControl&quot;</span><span class="p">]().</span>

<span class="c1">// -- [ Shutdown ] --------------</span>
<span class="nv">RCS</span> <span class="nb">ON</span><span class="p">.</span>
<span class="k">lock</span> <span class="nv">steering</span> <span class="ow">to</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">srfretrograde</span><span class="p">.</span>
<span class="k">wait</span> <span class="k">until</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">verticalspeed</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">.</span> <span class="c1">// waiting for descent</span>


<span class="c1">// -- [ Landing ] ---------------</span>
<span class="k">local</span> <span class="nv">hoverslam</span> <span class="ow">is</span> <span class="nv">hoverslamModel</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span>
<span class="k">lock</span> <span class="nv">throttle</span> <span class="ow">to</span> <span class="nv">hoverslam</span><span class="p">[</span><span class="s">&quot;getThrottle&quot;</span><span class="p">]().</span>


<span class="k">wait</span> <span class="k">until</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">status</span> <span class="o">=</span> <span class="s">&quot;splashed&quot;</span> <span class="ow">or</span> <span class="nv">ship</span><span class="p">:</span><span class="nv">status</span><span class="o">=</span><span class="s">&quot;landed&quot;</span><span class="p">.</span>
<span class="c1">// We&#39;ve landed!</span></code></pre></figure>

<hr />

<p><a href="/fall/tutorials/" class="btn btn-green fs-5 mb-4 mb-md-0 mr-2">More Tutorials</a></p>


          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
